[supervisord]
nodaemon=true
user=root
logfile=/var/log/sage/supervisord.log
pidfile=/var/run/supervisord.pid
loglevel=info

[program:postgresql]
command=/usr/lib/postgresql/16/bin/postgres -D /var/lib/postgresql/16/main
user=postgres
autostart=true
autorestart=true
stdout_logfile=/var/log/sage/postgresql.log
stderr_logfile=/var/log/sage/postgresql.error.log
priority=1

[program:sage-mcp]
command=python /app/sage_mcp_stdio_single.py
directory=/app
user=sage
autostart=true
autorestart=true
startsecs=10
startretries=3
stdout_logfile=/dev/null
stderr_logfile=/var/log/sage/sage_mcp_stdio.error.log
environment=SAGE_DB_HOST="localhost",SAGE_DB_PORT="5432",SAGE_DB_NAME="sage",SAGE_DB_USER="sage",SAGE_DB_PASSWORD="sage",PYTHONUNBUFFERED="1"
priority=10

[group:sage]
programs=postgresql,sage-mcp